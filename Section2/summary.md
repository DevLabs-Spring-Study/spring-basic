## 스프링 핵심 원리 이해1 - 예제 만들기

### 프로젝트 생성
- 순수 JAVA : 실제 요구사항 -> 대처가 가능한가? 에 대해 고민해볼 것.

### 비즈니스 요구사항과 설계
- 회원: 가입, 조회. 일반, VIP 두 개 등급. 자체 DB 구축 or 외부 시스템 연동.(미확정)
- 주문과 할인: 회원은 상품 주문, 등급에 따라 할인 정책 적용, 할인정책-> VIP는 1000원 할인(고정, but 금액은 변경 가능), 할인 정책은 변경 가능성 높음.
- 정책이 결정될때까지 기다릴 수 없다. -> 인터페이스를 만들고 구현체를 언제든지 갈아끼울 수 있도록 설계!

### 회원 도메인 설계
- 메모리 회원 저장소를 우선 만들어서 개발을 진행할 것 : 개발용으로만 쓰는 것. DB가 선택이 되면 그 부분은 나중에 수정하면 됨.
- 다이어그램: 도메인 협력관계 -(개발자)-> 클래스 다이어그램 -> 객체 다이어그램.
- 클래스 다이어그램은 클래스만 분석, 객체 다이어그램은 구현체(서버 만들때 동적으로 결정), 즉 실제 인스턴스끼리의 참조.

### 회원 도메인 개발
- 실무에서는 동시성 이슈때문에 HashMap -> ConcurrentHashMap 사용하게됨.

### 회원 도메인 실행과 테스트
- 코드의 설계상 문제점? -> 저장소를 변경할 때 OCP 원칙 준수? DIP 잘 지키고 있는가? => 의존관계가 인터페이스 뿐만 아니라 구현관계까지 의존하고 있음.

### 주문과 할인 도메인 설계
- 주문 생성 -> 회원 조회(등급이 필요하다) -> 할인 적용 -> 주문 결과 반환
- 역할과 구현을 분리: 저장소, 정책을 유연하게 변경할 수 있게 됨.

### 주문과 할인 도메인 개발
- SRP를 잘 지킨 설계임.

### 주문과 할인 도메인 실행과 테스트
- primitive type vs reference type: null 가능성 -> reference type
- 테스트 실행 시간 -> 단위 테스트가 중요 (컨테이너 등의 도움 없이 순수하게 자바 코드로 테스트하는 것)
- 과연 변경된 할인 정책으로 깔끔하게 바꿀 수 있을까?
